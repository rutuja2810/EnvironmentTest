name: Simple Object Input

on:
  workflow_dispatch:
    inputs:
      data:
        description: 'Enter JSON object (e.g. {"name": "Alice", "env": "dev"})'
        required: true

jobs:
  print:
    runs-on: ubuntu-latest
    steps:
      - name: Parse input
        shell: bash
        run: |
          # Save input to a variable using a heredoc to preserve structure
          read -r -d '' JSON_INPUT << EOF
${{ inputs.data }}
EOF

          echo "Raw input: $JSON_INPUT"

          NAME=$(echo "$JSON_INPUT" | jq -r '.name // "default-name"')
          ENV=$(echo "$JSON_INPUT" | jq -r '.env // "default-env"')

          echo "Name: $NAME"
          echo "Environment: $ENV"
